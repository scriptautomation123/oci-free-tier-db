# Oracle Database Suite - Enhanced Connection Guide
# Generated: {{ deployment_time }}
# Environment: {{ deployment_environment | default('development') }}
# Always Free Tier Deployment

## ğŸ’° COST INFORMATION
ğŸ¯ Tier: Always Free
ğŸ’µ Monthly Cost: $0.00
â° Time Limit: None (permanent)
ğŸ”’ Cost Protection: Enabled (lifecycle rules prevent charges)

## ğŸ—„ï¸ DATABASE INFORMATION
ğŸ“› Name: {{ database_info.database_name.value }}
ğŸ”¢ Version: {{ database_info.database_version.value }}
âš¡ Specs: 1 OCPU, 20GB storage (Always Free tier limits)
ğŸ†” Database ID: {{ database_info.database_id.value }}
ğŸŒ Region: {{ database_info.region.value | default('us-ashburn-1') }}

## ğŸŒ WEB INTERFACES
ğŸ–¥ï¸  Service Console: {{ database_info.service_console_url.value }}
{% for name, url in database_info.connection_urls.value.items() %}
ğŸ“Š {{ name | title | replace('_', ' ') }}: {{ url }}
{% endfor %}

## ğŸ” AUTHENTICATION & CREDENTIALS

### Admin Account
ğŸ‘¤ Username: {{ database_info.admin_username.value }}
ğŸ”‘ Password: {{ database_info.admin_password.value }}
ğŸ­ Role: ADMIN (Full database access)

### Schema-Based Access
ğŸ‘¥ Schema User: {{ schema_user | default('PARTMGMT') }}
ğŸ” Schema Password: {{ schema_password | default(database_info.admin_password.value) }}
ğŸ“ Default Schema: {{ schema_user | default('PARTMGMT') }}
ğŸ¯ Purpose: Application-specific operations

## ğŸ”— CONNECTION STRINGS & SERVICES
{% for service, connection in database_info.connection_strings.value.items() %}
ğŸ”Œ {{ service | upper }}: {{ connection }}
{% endfor %}

## ğŸš€ ENHANCED CONNECTION OPTIONS

### Quick Connect Scripts
```bash
# Interactive connection (recommended)
./enhanced-connect-db.sh

# Direct admin connection
./enhanced-connect-db.sh admin

# Schema user connection
./enhanced-connect-db.sh schema

# Read-only connection
./enhanced-connect-db.sh readonly

# Custom schema connection
DB_SCHEMA_USER=MYUSER ./enhanced-connect-db.sh schema
```

### Manual Connection Commands
```bash
# Admin connection
sqlplus {{ database_info.admin_username.value }}/{{ database_info.admin_password.value }}@{{ database_info.database_name.value }}_HIGH

# Schema connection (if configured)
sqlplus {{ schema_user | default('PARTMGMT') }}/{{ schema_password | default(database_info.admin_password.value) }}@{{ database_info.database_name.value }}_HIGH

# With TNS Admin explicitly set
export TNS_ADMIN="{{ wallet_dir }}"
sqlplus {{ database_info.admin_username.value }}/{{ database_info.admin_password.value }}@{{ database_info.database_name.value }}_HIGH
```

## ğŸ“Š SCHEMA MANAGEMENT OPERATIONS

### Available Deployment Actions
ğŸ”„ **deploy**: Full schema deployment (drop + create + packages + data)
ğŸ—‘ï¸  **reset-schema**: Drop and recreate schema structure only
ğŸ“Š **reset-data**: Reset data while preserving schema
ğŸ§ª **test-only**: Run validation tests without changes

### Schema Management Commands
```bash
# Deploy complete schema
ansible-playbook playbooks/local-complete.yml -e deployment_action=deploy

# Reset schema structure
ansible-playbook playbooks/local-complete.yml -e deployment_action=reset-schema

# Reset data only
ansible-playbook playbooks/local-complete.yml -e deployment_action=reset-data

# Run tests only
ansible-playbook playbooks/local-complete.yml -e deployment_action=test-only
```

### GitHub Actions Workflows
```bash
# Trigger schema deployment via GitHub Actions
gh workflow run deploy-oracle-packages.yml -f deployment_action=deploy

# Trigger data reset
gh workflow run deploy-oracle-packages.yml -f deployment_action=reset-data
```

## ğŸ“¦ DEPLOYED COMPONENTS STATUS

### Infrastructure
âœ… Oracle Autonomous Database (Always Free)
âœ… Wallet-based authentication configured
âœ… Network security configured
âœ… Cost protection lifecycle rules enabled

### Database Schema
{% if deployment_action is defined and deployment_action in ['deploy', 'reset-schema'] %}
âœ… Schema: {{ schema_user | default('PARTMGMT') }}
âœ… Partition Management Packages
âœ… Configuration Tables
âœ… Validation Framework
{% else %}
â³ Schema deployment pending (use deployment_action=deploy)
{% endif %}

### Sample Data
{% if deployment_action is defined and deployment_action in ['deploy', 'reset-data'] %}
âœ… Test datasets loaded
âœ… Performance benchmarks available
âœ… Example data for validation
{% else %}
â³ Sample data loading pending
{% endif %}

## ğŸ› ï¸ DEVELOPMENT WORKFLOW

### Schema Development Cycle
1. **Deploy**: `ansible-playbook playbooks/local-complete.yml -e deployment_action=deploy`
2. **Develop**: Make schema changes in SQL files
3. **Test**: `ansible-playbook playbooks/local-complete.yml -e deployment_action=test-only`
4. **Reset**: `ansible-playbook playbooks/local-complete.yml -e deployment_action=reset-schema`
5. **Repeat**: Iterative development

### Connection Pattern Examples
```sql
-- Check current user and schema
SELECT USER, SYS_CONTEXT('USERENV', 'CURRENT_SCHEMA') FROM dual;

-- List available schemas
SELECT username FROM all_users 
WHERE username NOT LIKE '%$%' 
ORDER BY username;

-- Switch schema context (if privileges allow)
ALTER SESSION SET CURRENT_SCHEMA = {{ schema_user | default('PARTMGMT') }};

-- Verify schema objects
SELECT object_type, COUNT(*) 
FROM user_objects 
GROUP BY object_type 
ORDER BY object_type;
```

## ğŸ§ª TESTING & VALIDATION

### Available Test Scripts
```bash
# Run all validation tests
./run-examples.sh

# Performance benchmarks
./run-benchmarks.sh

# Generate validation report
ansible-playbook playbooks/test-and-validate-only.yml
```

### Manual Validation Queries
```sql
-- Verify partition management setup
SELECT table_name, partitioning_type, partition_count 
FROM user_part_tables;

-- Check package status
SELECT object_name, status 
FROM user_objects 
WHERE object_type = 'PACKAGE';

-- Validate data integrity
SELECT table_name, num_rows 
FROM user_tables 
WHERE table_name LIKE 'TEST_%';
```

## ğŸ“š ALWAYS FREE TIER BENEFITS & LIMITS

### âœ… Benefits
- ğŸ†“ No time limits or expiration
- ğŸ’° No charges ever (with proper configuration)
- ğŸ”§ Full Oracle Database functionality
- ğŸš€ Enterprise-grade features included
- ğŸ“Š Advanced analytics and ML capabilities

### âš ï¸  Limits & Restrictions
- ğŸ–¥ï¸  1 OCPU maximum (enforced by lifecycle rules)
- ğŸ’¾ 20GB storage maximum (enforced by lifecycle rules)
- ğŸ¢ Up to 2 Autonomous Databases per tenancy
- ğŸŒ No auto-scaling (disabled for cost protection)
- ğŸ”„ Manual scaling not allowed (lifecycle prevented)

### ğŸ›¡ï¸  Cost Protection Measures
- ğŸš¨ Terraform lifecycle rules prevent scaling
- ğŸ”’ Variable validation enforces limits
- âœ… Ansible assertions verify compliance
- ğŸ“Š Monitoring alerts on configuration drift

## â™»ï¸  CLEANUP & MANAGEMENT

### Resource Cleanup
```bash
# Complete cleanup (removes all resources)
ansible-playbook playbooks/cleanup-resources.yml

# Schema-only cleanup
ansible-playbook playbooks/local-complete.yml -e deployment_action=reset-schema
```

### Backup & Recovery
```bash
# Export schema data
sqlplus {{ database_info.admin_username.value }}/{{ database_info.admin_password.value }}@{{ database_info.database_name.value }}_HIGH @export_data.sql

# Monitor database usage
SELECT * FROM user_segments ORDER BY bytes DESC;
```

## ğŸ†˜ TROUBLESHOOTING

### Common Connection Issues
1. **Wallet not found**: Verify `{{ wallet_dir }}` exists and contains wallet files
2. **TNS error**: Check `TNS_ADMIN` environment variable points to wallet directory
3. **Authentication failure**: Verify credentials in connection details above
4. **Service not available**: Ensure database is running in OCI console

### Schema Issues
1. **Schema doesn't exist**: Run deployment with `deployment_action=deploy`
2. **Permission denied**: Use admin connection to grant privileges
3. **Objects missing**: Verify deployment completed successfully

### Performance Issues
1. **Slow queries**: Remember this is Always Free tier (limited resources)
2. **Connection timeouts**: Check network connectivity and OCI service status
3. **Space issues**: Monitor 20GB storage limit compliance

## ğŸ“ SUPPORT & RESOURCES

- ğŸ“– Oracle Documentation: https://docs.oracle.com/en/cloud/paas/autonomous-database/
- ğŸ“ Oracle Learning: https://education.oracle.com/
- ğŸ’¬ Community Forums: https://community.oracle.com/
- ğŸ”§ OCI Support (for paid accounts): https://support.oracle.com/

---
*This connection guide is automatically generated and updated with each deployment.*
*Last updated: {{ deployment_time }}*